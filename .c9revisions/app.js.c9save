{"revisions":{"1337239487185":{"ts":1337239487185,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"/**\r\n * Module dependencies.\r\n */\r\n\r\nvar express        = require('express')\r\n  , routes         = require('./routes/index')\r\n  , board          = require('./board')\r\n  , authentication = require('./authentication')\r\n  , fs             = require('fs')\r\n  , sys            = require('sys')\r\n  , stylus         = require('stylus');\r\n\r\n\r\nconsole.log(process.env.HOST);\r\n\r\nvar app = module.exports = express.createServer();\r\n\r\nvar MemStore = express.session.MemoryStore;\r\n\r\n// Log\r\n\r\nvar fileName = __dirname + '/logs/hello_log.txt';\r\nvar fileStream = fs.createWriteStream(fileName);\r\n\r\n// error handler\r\nfileStream.addListener(\"error\", function(err) {\r\n    sys.debug(err);\r\n});\r\n\r\n// Configuration\r\n  \r\napp.configure(function(){\r\n  app.set('views', __dirname + '/views');\r\n  app.set('view engine', 'jade');\r\n  app.use(express.bodyParser());\r\n  app.use(express.cookieParser());\r\n  app.use(express.session({store: MemStore({\r\n    reapInterval: 60000 * 10\r\n  })\r\n    , secret: 'Nothing Cake'}));\r\n  app.use(express.methodOverride());\r\n  app.use(app.router);\r\n  app.use(express.static(__dirname + '/public'));\r\n  app.use(express.logger({stream: fileStream}));\r\n  app.use(\"/quick-images\", express.static(__dirname + '/quick-images'));\r\n  app.use(stylus.middleware({ src: __dirname + '/public' }));\r\n});\r\n\r\napp.configure('development', function(){\r\n  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));\r\n});\r\n\r\napp.configure('production', function(){\r\n  app.use(express.errorHandler());\r\n});\r\n\r\napp.configure('test', function(){\r\n  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));\r\n});\r\n\r\nfunction requiresLogin(req, res, next) {\r\n  if (req.session.user) {\r\n    next();\r\n  } else {\r\n    res.redirect('/login?redir=' + req.url); // 로그인이 안되어 있을시 로그인 redirect\r\n  }\r\n};\r\n\r\n/* Sessions */\r\n\r\napp.get('/login' , authentication.getLogin);\r\napp.post('/login', authentication.postLogin);\r\n\r\napp.get('/signup' , authentication.getSignUp);\r\napp.post('/signup', authentication.postSignUp);\r\n\r\napp.get('/logout', authentication.logout)\r\n\r\n// Routes\r\n\r\napp.get('/'        , routes.index);\r\napp.get('/about'   , routes.about);\r\napp.get('/projects', routes.projects);\r\napp.get('/studies' , routes.studies);\r\napp.get('/ingcam'  , requiresLogin, routes.ingcam);\r\n\r\napp.get( '/board/file'              , board.getBoardFile);\r\napp.get( '/board/:board/new'        , board.newBoard);\r\napp.get( '/board/:board'            , board.listBoard);\r\napp.post('/board/:board'            , board.postBoard);\r\napp.get( '/board/:board/read/:id'   , board.readBoard);\r\napp.post('/board/:board/:id'        , board.updateBoard);\r\napp.get( '/board/:board/delete/:id' , board.deleteBoard);\r\napp.get( '/board/:board/edit/:id'   , board.editBoard);\r\napp.post('/board/:board/:id/comment', board.commentBoard);\r\napp.get( '/board/:board/:id/comment/del/:idComment', board.deleteCommentBoard); //앤 너무 길어서 세로줄 맞추고 싶지 않다.\r\n\r\n\r\n\r\napp.listen(3017, function(){\r\n  console.log(\"Express server listening on port %d in %s mode\", app.address().port, app.settings.env);\r\n});\r\n"]],"start1":0,"start2":0,"length1":0,"length2":3059}]],"length":3059},"1337239966322":{"contributors":[],"silentsave":false,"ts":1337239966322,"patch":[[{"diffs":[[0,"\r\n\r\n"],[-1,"console.log(process.env.HOST);\r\n\r\n"],[0,"var "]],"start1":331,"start2":331,"length1":42,"length2":8}]],"length":3025,"saved":false},"1337240021099":{"contributors":[],"silentsave":false,"ts":1337240021099,"patch":[[{"diffs":[[0,"  , "],[-1,"sys    "],[1,"util"],[0,"    "]],"start1":253,"start2":253,"length1":15,"length2":12},{"diffs":[[0,"equire('"],[-1,"sys"],[1,"util"],[0,"')\r\n  , "]],"start1":272,"start2":272,"length1":19,"length2":20}]],"length":3023,"saved":false},"1337240024974":{"contributors":[],"silentsave":false,"ts":1337240024974,"patch":[[{"diffs":[[0,"    "],[-1,"sys"],[1,"util"],[0,".deb"]],"start1":614,"start2":614,"length1":11,"length2":12}]],"length":3024,"saved":false},"1337240039093":{"contributors":[],"silentsave":false,"ts":1337240039093,"patch":[[{"diffs":[[0,"0 * 10\r\n"],[1,"    "],[0,"  })\r\n  "]],"start1":908,"start2":908,"length1":16,"length2":20}]],"length":3028,"saved":false},"1337240043364":{"contributors":[],"silentsave":false,"ts":1337240043364,"patch":[[{"diffs":[[0,"* 10"],[-1,"\r\n     "],[0," })\r"]],"start1":910,"start2":910,"length1":15,"length2":8}]],"length":3021,"saved":false},"1337240060226":{"contributors":[],"silentsave":false,"ts":1337240060226,"patch":[[{"diffs":[[0,"ession({"],[1,"\r\n    "],[0,"store: M"]],"start1":859,"start2":859,"length1":16,"length2":22}]],"length":3027,"saved":false},"1337240063189":{"contributors":[],"silentsave":false,"ts":1337240063189,"patch":[[{"diffs":[[0,"mStore({"],[-1,"\r\n    "],[0,"reapInte"]],"start1":882,"start2":882,"length1":22,"length2":16}]],"length":3021,"saved":false},"1337278794870":{"contributors":[],"silentsave":false,"ts":1337278794870,"patch":[[{"diffs":[[0,"/public'"],[1,", compress: true"],[0," }));\r\n}"]],"start1":1238,"start2":1238,"length1":16,"length2":32},{"diffs":[[0,".studies);\r\n"],[1,"app.get('/studies' , routes.studies);\r\n"],[0,"app.get('/in"]],"start1":2196,"start2":2196,"length1":24,"length2":63}]],"length":3076,"saved":false},"1337278817329":{"contributors":[],"silentsave":false,"ts":1337278817329,"patch":[[{"diffs":[[0,"        "],[1," "],[0,", routes"]],"start1":2066,"start2":2066,"length1":16,"length2":17},{"diffs":[[0,"'/about'"],[1,"  "],[0,"   , rou"]],"start1":2101,"start2":2101,"length1":16,"length2":18},{"diffs":[[0,"rojects'"],[1,"  "],[0,", routes"]],"start1":2143,"start2":2143,"length1":16,"length2":18},{"diffs":[[0,"p.get('/studies'"],[1,"  "],[0," , routes.studie"]],"start1":2176,"start2":2176,"length1":32,"length2":34},{"diffs":[[0,"p.get('/"],[-1,"stud"],[1,"activit"],[0,"ies'"],[-1," "],[0,", routes"]],"start1":2217,"start2":2217,"length1":25,"length2":27},{"diffs":[[0,"/ingcam'"],[1,"  "],[0,"  , requ"]],"start1":2265,"start2":2265,"length1":16,"length2":18}]],"length":3087,"saved":false},"1337278819316":{"contributors":[],"silentsave":false,"ts":1337278819316,"patch":[[{"diffs":[[0,"'/'         "],[1," "],[0,", routes.ind"]],"start1":2063,"start2":2063,"length1":24,"length2":25}]],"length":3088,"saved":false},"1337278826813":{"contributors":[],"silentsave":false,"ts":1337278826813,"patch":[[{"diffs":[[0,"vities', routes."],[-1,"stud"],[1,"activit"],[0,"ies);\r\napp.get('"]],"start1":2230,"start2":2230,"length1":36,"length2":39}]],"length":3091,"saved":false},"1337296792245":{"contributors":[],"silentsave":false,"ts":1337296792245,"patch":[[{"diffs":[[0," 않다.\r\n\r\n"],[1,"app.post('/quick', function(req, res) { \r\n});\r\n"],[0,"\r\n\r\napp."]],"start1":2940,"start2":2940,"length1":16,"length2":63}]],"length":3138,"saved":false},"1337296805030":{"contributors":[],"silentsave":false,"ts":1337296805030,"patch":[[{"diffs":[[0,"es) { \r\n"],[1,"  \r\n"],[0,"});\r\n\r\n\r"]],"start1":2982,"start2":2982,"length1":16,"length2":20}]],"length":3142,"saved":false},"1337296814276":{"contributors":[],"silentsave":false,"ts":1337296814276,"patch":[[{"diffs":[[0,") { \r\n  "],[1,"console.log(req);"],[0,"\r\n});\r\n\r"]],"start1":2984,"start2":2984,"length1":16,"length2":33}]],"length":3159,"saved":false},"1337296918444":{"contributors":[],"silentsave":false,"ts":1337296918444,"patch":[[{"diffs":[[0,".log(req"],[1,".files"],[0,");\r\n});\r"]],"start1":2999,"start2":2999,"length1":16,"length2":22}]],"length":3165,"saved":false},"1337297403522":{"contributors":[],"silentsave":false,"ts":1337297403522,"patch":[[{"diffs":[[0,"req."],[-1,"files"],[1,"htImageInfo"],[0,");\r\n"]],"start1":3004,"start2":3004,"length1":13,"length2":19}]],"length":3171,"saved":false},"1337297633575":{"contributors":[],"silentsave":false,"ts":1337297633575,"patch":[[{"diffs":[[0,"(req"],[-1,".htImageInfo"],[0,");\r\n"]],"start1":3003,"start2":3003,"length1":20,"length2":8}]],"length":3159,"saved":false},"1337298258004":{"contributors":[],"silentsave":false,"ts":1337298258004,"patch":[[{"diffs":[[0,".log(req"],[1,".img1"],[0,");\r\n});\r"]],"start1":2999,"start2":2999,"length1":16,"length2":21}]],"length":3164,"saved":false},"1337298304042":{"contributors":[],"silentsave":false,"ts":1337298304042,"patch":[[{"diffs":[[0,"req."],[-1,"img1"],[1,"htImageInfo"],[0,");\r\n"]],"start1":3004,"start2":3004,"length1":12,"length2":19}]],"length":3171,"saved":false},"1337337849311":{"contributors":[],"silentsave":false,"ts":1337337849311,"patch":[[{"diffs":[[0,"\r\n  "],[-1,"console.log(req.htImageInfo);\r\n});\r\n"],[1,"  \r\n}"],[0,"\r\n\r\n"]],"start1":2988,"start2":2988,"length1":44,"length2":13}]],"length":3140,"saved":false},"1337337977898":{"contributors":[],"silentsave":false,"ts":1337337977898,"patch":[[{"diffs":[[0,"{ \r\n    "],[1,"fs.writeFile(\"/tmp/test\", \"Hey there!\", function(err) {\r\n    if(err) {\r\n        console.log(err);\r\n    } else {\r\n        console.log(\"The file was saved!\");\r\n    }\r\n}); "],[0,"\r\n}\r\n\r\na"]],"start1":2986,"start2":2986,"length1":16,"length2":185}]],"length":3309,"saved":false},"1337337981158":{"contributors":[],"silentsave":false,"ts":1337337981158,"patch":[[{"diffs":[[0,");\r\n    "],[1,"  "],[0,"}\r\n"],[1,"  "],[0,"}); \r\n}\r"]],"start1":3148,"start2":3148,"length1":19,"length2":23}]],"length":3313,"saved":false},"1337337982663":{"contributors":[],"silentsave":false,"ts":1337337982663,"patch":[[{"diffs":[[0,"es) { \r\n"],[-1,"  "],[0,"  fs.wri"]],"start1":2982,"start2":2982,"length1":18,"length2":16}]],"length":3311,"saved":false},"1337337990456":{"contributors":[],"silentsave":false,"ts":1337337990456,"patch":[[{"diffs":[[0,"e(\"/"],[-1,"tmp/tes"],[1,"logs/request.tx"],[0,"t\", "]],"start1":3003,"start2":3003,"length1":15,"length2":23}]],"length":3319,"saved":false},"1337337999125":{"contributors":[],"silentsave":false,"ts":1337337999125,"patch":[[{"diffs":[[0,"(\"/logs/"],[1,"quick-"],[0,"request."]],"start1":3004,"start2":3004,"length1":16,"length2":22},{"diffs":[[0,"t\", "],[-1,"\"Hey there!\""],[1,"req"],[0,", fu"]],"start1":3028,"start2":3028,"length1":20,"length2":11}]],"length":3316,"saved":false},"1337338001468":{"contributors":[],"silentsave":false,"ts":1337338001468,"patch":[[{"diffs":[[0,"-request"],[1,"s"],[0,".txt\", r"]],"start1":3017,"start2":3017,"length1":16,"length2":17}]],"length":3317,"saved":false},"1337338034293":{"contributors":[],"silentsave":false,"ts":1337338034293,"patch":[[{"diffs":[[0,");\r\n    "],[-1,"  "],[0,"}\r\n  });"]],"start1":3152,"start2":3152,"length1":18,"length2":16}]],"length":3315,"saved":false},"1337338037801":{"contributors":[],"silentsave":false,"ts":1337338037801,"patch":[[{"diffs":[[0,"f(err) {\r\n      "],[-1,"  "],[0,"console.log(err)"]],"start1":3060,"start2":3060,"length1":34,"length2":32},{"diffs":[[0,"  } else {\r\n"],[-1,"  "],[0,"      consol"]],"start1":3097,"start2":3097,"length1":26,"length2":24}]],"length":3311,"saved":false},"1337338042578":{"contributors":[],"silentsave":false,"ts":1337338042578,"patch":[[{"diffs":[[0," }); \r\n}"],[1,";"],[0,"\r\n\r\napp."]],"start1":3160,"start2":3160,"length1":16,"length2":17}]],"length":3312,"saved":false},"1337338075513":{"contributors":[],"silentsave":false,"ts":1337338075513,"patch":[[{"diffs":[[0," }); \r\n}"],[1,")"],[0,";\r\n\r\napp"]],"start1":3160,"start2":3160,"length1":16,"length2":17}]],"length":3313,"saved":false},"1337338183628":{"contributors":[],"silentsave":false,"ts":1337338183628,"patch":[[{"diffs":[[0,"iteFile("],[1,"__dirname + "],[0,"\"/logs/q"]],"start1":2997,"start2":2997,"length1":16,"length2":28}]],"length":3325,"saved":false},"1337338213949":{"contributors":[],"silentsave":false,"ts":1337338213949,"patch":[[{"diffs":[[0,"es) { \r\n"],[1,"  console.log(req);\r\n"],[0,"  fs.wri"]],"start1":2982,"start2":2982,"length1":16,"length2":37}]],"length":3346,"saved":false},"1337338338869":{"contributors":[],"silentsave":false,"ts":1337338338869,"patch":[[{"diffs":[[0,"(req);\r\n"],[1,"  console.log(req.asd);\r\n"],[0,"  fs.wri"]],"start1":3003,"start2":3003,"length1":16,"length2":41}]],"length":3371,"saved":false},"1337339084361":{"contributors":[],"silentsave":false,"ts":1337339084361,"patch":[[{"diffs":[[0,"{ \r\n"],[-1,"  console.log(req);\r\n  console.log(req.asd);\r\n  fs.writeFile(__dirname + \"/logs/quick-requests.txt\", req, function(err) {\r\n    if(err) {\r\n      console.log(err);\r\n    } else {\r\n      console.log(\"The file was saved!\");\r\n    }\r\n  }); \r\n"],[0,"});\r"]],"start1":2986,"start2":2986,"length1":243,"length2":8}]],"length":3136,"saved":false},"1337339104621":{"contributors":[],"silentsave":false,"ts":1337339104621,"patch":[[{"diffs":[[0,"k', "],[-1,"function(req, res) { \r\n}"],[1,"routes.quick"],[0,");\r\n"]],"start1":2963,"start2":2963,"length1":32,"length2":20}]],"length":3124,"saved":false},"1337339109708":{"contributors":[],"silentsave":false,"ts":1337339109708,"patch":[[{"diffs":[[0,"es.quick"],[1,"Image"],[0,");\r\n\r\nap"]],"start1":2971,"start2":2971,"length1":16,"length2":21}]],"length":3129,"saved":false},"1337368660301":{"contributors":[],"silentsave":false,"ts":1337368660301,"patch":[[{"diffs":[[0,"rd.postBoard);\r\n"],[1,"app.get( '/board/:board'            , board.checkBoard);\r\n"],[0,"app.get( '/board"]],"start1":2531,"start2":2531,"length1":32,"length2":90}]],"length":3187,"saved":false},"1337368675630":{"contributors":[],"silentsave":false,"ts":1337368675630,"patch":[[{"diffs":[[0,"oardFile);\r\n"],[1,"app.get( '/board/check/board:board' , board.checkBoard);\r\n"],[0,"app.get( '/b"]],"start1":2365,"start2":2365,"length1":24,"length2":82},{"diffs":[[0,");\r\n"],[-1,"app.get( '/board/:board'            , board.checkBoard);\r\n"],[0,"app."]],"start1":2601,"start2":2601,"length1":66,"length2":8}]],"length":3187,"saved":false},"1337368682935":{"contributors":[],"silentsave":false,"ts":1337368682935,"patch":[[{"diffs":[[0,"eck/"],[-1,"board"],[0,":board'"],[1,"     "],[0," , b"]],"start1":2396,"start2":2396,"length1":20,"length2":20}]],"length":3187,"saved":false},"1337371358758":{"contributors":[],"silentsave":false,"ts":1337371358758,"patch":[[{"diffs":[[0,"app.use(express."],[1,"['"],[0,"static"],[1,"']"],[0,"(__dirname + '/p"]],"start1":1017,"start2":1017,"length1":38,"length2":42},{"diffs":[[0,"express."],[1,"['"],[0,"static"],[1,"']"],[0,"(__dirna"]],"start1":1147,"start2":1147,"length1":22,"length2":26}]],"length":3195,"saved":false},"1337371372156":{"contributors":[],"silentsave":false,"ts":1337371372156,"patch":[[{"diffs":[[0,".use(express"],[-1,"."],[0,"['static'](_"]],"start1":1020,"start2":1020,"length1":25,"length2":24},{"diffs":[[0," express"],[-1,"."],[0,"['static"]],"start1":1145,"start2":1145,"length1":17,"length2":16}]],"length":3193,"saved":false},"1337411881052":{"contributors":[],"silentsave":false,"ts":1337411881052,"patch":[[{"diffs":[[0,"(301"],[-1,"7"],[1,"8"],[0,", fu"]],"start1":3064,"start2":3064,"length1":9,"length2":9}]],"length":3193,"saved":false},"1337415224752":{"contributors":[],"silentsave":false,"ts":1337415224752,"patch":[[{"diffs":[[0,"(301"],[-1,"8"],[1,"7"],[0,", fu"]],"start1":3064,"start2":3064,"length1":9,"length2":9}]],"length":3193,"saved":false}}}